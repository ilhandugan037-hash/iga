<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turkcell SUPREME COMMANDER | ƒ∞lhan Dugan</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- CORE VARIABLES --- */
        :root {
            --bg-body: #0b0e11;
            --bg-nav: #161b22;
            --bg-card: #21262d;
            --tc-blue: #004F9F;
            --tc-yellow: #FFC900;
            --text-main: #c9d1d9;
            --text-muted: #8b949e;
            --accent-green: #238636;
            --accent-red: #da3633;
            --accent-purple: #a371f7;
            --border: #30363d;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, sans-serif; }
        body { background: var(--bg-body); color: var(--text-main); display: flex; height: 100vh; overflow: hidden; font-size: 14px; }
        
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-body); }
        ::-webkit-scrollbar-thumb { background: #444; border-radius: 3px; }

        /* --- SIDEBAR --- */
        .sidebar { width: 270px; background: var(--bg-nav); border-right: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; z-index: 100; }
        .brand { height: 70px; background: white; border-bottom: 3px solid var(--tc-yellow); display: flex; align-items: center; justify-content: center; }
        .brand img { height: 32px; }
        
        .user-panel { padding: 20px; border-bottom: 1px solid var(--border); background: rgba(255,255,255,0.02); }
        .u-name { color: var(--tc-yellow); font-weight: bold; font-size: 1.1rem; letter-spacing: 0.5px; }
        .u-role { font-size: 0.8rem; color: var(--text-muted); margin-top: 4px; }

        .nav-menu { flex: 1; padding: 10px 0; overflow-y: auto; }
        .nav-header { font-size: 0.75rem; color: #555; padding: 10px 20px 5px 20px; text-transform: uppercase; font-weight: bold; letter-spacing: 1px; margin-top: 10px; }
        .nav-item { padding: 12px 20px; cursor: pointer; display: flex; align-items: center; gap: 15px; color: var(--text-muted); transition: 0.2s; border-left: 3px solid transparent; }
        .nav-item:hover, .nav-item.active { background: rgba(0,79,159,0.2); color: white; border-left-color: var(--tc-yellow); }
        .nav-item i { width: 22px; text-align: center; }

        /* --- MAIN AREA --- */
        .main { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
        .header { height: 60px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; padding: 0 25px; background: var(--bg-nav); }
        .header-title { font-size: 1.2rem; font-weight: 600; color: white; display: flex; align-items: center; gap: 10px; }
        .badges { display: flex; gap: 15px; }
        .badge { padding: 4px 10px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 4px; font-size: 0.85rem; display: flex; align-items: center; gap: 5px; }
        .dot { width: 8px; height: 8px; border-radius: 50%; background: var(--accent-green); animation: blink 2s infinite; }
        
        /* --- VIEWS --- */
        .view { display: none; height: 100%; padding: 20px; flex-direction: column; }
        .view.active { display: flex; }

        /* --- DASHBOARD --- */
        .dash-layout { display: flex; height: 100%; gap: 15px; }
        .list-col { flex: 4; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; display: flex; flex-direction: column; overflow: hidden; }
        .detail-col { flex: 3; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; display: flex; flex-direction: column; overflow: hidden; }

        .ticket-item { display: grid; grid-template-columns: 40px 1fr 100px 70px; padding: 15px; border-bottom: 1px solid var(--border); cursor: pointer; transition: 0.2s; align-items: center; }
        .ticket-item:hover { background: rgba(255,255,255,0.03); }
        .ticket-item.active { background: rgba(0,79,159,0.2); border-left: 3px solid var(--tc-blue); }
        .t-icon { width: 32px; height: 32px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; }
        
        /* --- DETAIL PANEL --- */
        .tab-header { display: flex; border-bottom: 1px solid var(--border); background: rgba(0,0,0,0.2); }
        .tab-btn { flex: 1; padding: 15px; text-align: center; cursor: pointer; color: var(--text-muted); border-bottom: 2px solid transparent; }
        .tab-btn.active { color: white; border-bottom-color: var(--tc-yellow); background: rgba(255,255,255,0.02); }
        .tab-content { display: none; padding: 20px; flex: 1; overflow-y: auto; }
        .tab-content.show { display: block; }

        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .info-box { background: rgba(0,0,0,0.2); padding: 10px; border-radius: 4px; border: 1px solid rgba(255,255,255,0.05); }
        .lbl { font-size: 0.75rem; color: var(--text-muted); display: block; margin-bottom: 3px; }
        .val { font-size: 0.95rem; color: #fff; font-family: 'Consolas', monospace; }

        .console { background: #000; color: #0f0; font-family: 'Consolas', monospace; padding: 15px; border-radius: 4px; height: 200px; overflow-y: auto; font-size: 0.8rem; border: 1px solid #333; }

        /* --- ABONE SORGU --- */
        .search-container { max-width: 650px; margin: 40px auto; width: 100%; }
        .search-inp { width: 100%; padding: 15px 20px; background: #0b0e11; border: 1px solid var(--border); border-radius: 8px; font-size: 1.2rem; color: white; margin-bottom: 15px; }
        .result-card { display: none; background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 30px; position: relative; box-shadow: 0 10px 40px rgba(0,0,0,0.6); }
        .target-found { position: absolute; top: 0; right: 0; background: var(--accent-red); color: white; padding: 5px 15px; font-weight: bold; border-bottom-left-radius: 12px; border-top-right-radius: 12px; font-size: 0.8rem; }

        /* --- NEW PAGES STYLES --- */
        .staff-table, .roam-table { width: 100%; border-collapse: collapse; }
        .staff-table th, .staff-table td, .roam-table th, .roam-table td { padding: 12px; text-align: left; border-bottom: 1px solid var(--border); }
        .staff-table th { background: rgba(0,0,0,0.2); color: var(--text-muted); }
        .status-badge { padding: 3px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 600; }
        
        .map-placeholder { background: #111; height: 300px; border-radius: 8px; border: 1px solid var(--border); display: flex; align-items: center; justify-content: center; position: relative; overflow: hidden; margin-bottom: 20px; }
        .map-dot { width: 10px; height: 10px; border-radius: 50%; position: absolute; box-shadow: 0 0 10px currentColor; animation: blink 2s infinite; }

        /* --- ANIMATIONS --- */
        @keyframes blink { 50% { opacity: 0.4; } }

        /* --- MODAL --- */
        .modal-wrap { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 999; display: none; align-items: center; justify-content: center; backdrop-filter: blur(5px); }
        .modal-box { width: 500px; background: var(--bg-nav); border: 1px solid var(--border); border-radius: 10px; padding: 25px; box-shadow: 0 20px 60px black; }

    </style>
</head>
<body>

    <nav class="sidebar">
        <div class="brand">
            <img src="https://logos-world.net/wp-content/uploads/2020/12/Turkcell-Logo.png" alt="Turkcell">
        </div>
        <div class="user-panel">
            <div class="u-name">ƒ∞LHAN DUGAN</div>
            <div class="u-role">Bilgi ƒ∞≈ülem Sorumlusu</div>
            <div style="font-size:0.7rem; color:var(--accent-green); margin-top:5px;">‚óè Yetki Seviyesi: 5 (Tam)</div>
        </div>
        
        <div class="nav-menu">
            <div class="nav-header">Operasyon</div>
            <div class="nav-item active" onclick="setView('dash', this)"><i class="fas fa-satellite-dish"></i> Canlƒ± Arƒ±za Takip</div>
            <div class="nav-item" onclick="setView('staff', this)"><i class="fas fa-users-cog"></i> Personel & Vardiya <span style="background:var(--accent-purple); font-size:0.6rem; padding:2px 5px; border-radius:3px; margin-left:auto;">YENƒ∞</span></div>
            <div class="nav-item" onclick="setView('roam', this)"><i class="fas fa-globe-americas"></i> K√ºresel Roaming <span style="background:var(--accent-purple); font-size:0.6rem; padding:2px 5px; border-radius:3px; margin-left:auto;">YENƒ∞</span></div>
            
            <div class="nav-header">G√ºvenlik & Log</div>
            <div class="nav-item" onclick="setView('sorgu', this)"><i class="fas fa-user-secret"></i> Yasaklƒ± B√∂lge: Sorgu</div>
            <div class="nav-item" onclick="setView('history', this)"><i class="fas fa-history"></i> Aktarƒ±lan ƒ∞≈üler</div>
            <div class="nav-item" onclick="setView('server', this)"><i class="fas fa-server"></i> Sunucu Odasƒ±</div>
            <div class="nav-item" onclick="setView('chat', this)"><i class="fas fa-comments"></i> Saha Ekibi (Chat)</div>
        </div>
    </nav>

    <main class="main">
        <header class="header">
            <div class="header-title" id="view-title"><i class="fas fa-satellite-dish"></i> Canlƒ± Arƒ±za Takip</div>
            <div class="badges">
                <div class="badge"><div class="dot"></div> Core Network</div>
                <div class="badge" style="border-color:var(--tc-yellow); color:var(--tc-yellow);">Bekleyen: <span id="stat-pend">14</span></div>
                <div class="badge" id="clock">12:00:00</div>
            </div>
        </header>

        <div id="dash" class="view active">
            <div class="dash-layout">
                <div class="list-col">
                    <div style="padding:15px; border-bottom:1px solid var(--border); font-weight:bold; background:rgba(0,0,0,0.2);">Gelen Destek Talepleri</div>
                    <div id="ticket-list" style="flex:1; overflow-y:auto;">
                        </div>
                </div>
                <div class="detail-col" id="detail-area">
                    <div style="height:100%; display:flex; flex-direction:column; align-items:center; justify-content:center; color:var(--text-muted);">
                        <i class="fas fa-hand-pointer" style="font-size:3rem; margin-bottom:20px; opacity:0.3;"></i>
                        <p>Detaylar i√ßin soldan se√ßim yapƒ±n.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="staff" class="view">
            <div style="display:flex; gap:20px; margin-bottom:20px;">
                <div style="flex:1; background:var(--bg-card); padding:20px; border-radius:8px; border:1px solid var(--border);">
                    <h3 style="color:var(--tc-yellow); margin-bottom:15px;">Vardiya √ñzeti</h3>
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px;"><span>Sahadaki Ekip:</span> <span style="color:white; font-weight:bold;">42</span></div>
                    <div style="display:flex; justify-content:space-between; margin-bottom:5px;"><span>Mola:</span> <span style="color:white; font-weight:bold;">8</span></div>
                    <div style="display:flex; justify-content:space-between;"><span>Ara√ß Durumu:</span> <span style="color:var(--accent-green); font-weight:bold;">Yeterli</span></div>
                </div>
                <div style="flex:1; background:var(--bg-card); padding:20px; border-radius:8px; border:1px solid var(--border); display:flex; align-items:center;">
                    <i class="fas fa-car-side" style="font-size:2.5rem; color:var(--tc-blue); margin-right:20px;"></i>
                    <div>
                        <div style="font-size:0.8rem; color:var(--text-muted);">En Yakƒ±n Ekip (≈ûi≈üli)</div>
                        <div style="font-size:1.2rem; font-weight:bold; color:white;">34 TRK 99 (Ahmet K.)</div>
                        <div style="font-size:0.8rem; color:var(--accent-green);">M√ºsait - G√∂rev Bekliyor</div>
                    </div>
                </div>
            </div>

            <div style="flex:1; background:var(--bg-card); border:1px solid var(--border); border-radius:8px; overflow:hidden;">
                <table class="staff-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Personel Adƒ±</th>
                            <th>B√∂lge</th>
                            <th>Ara√ß Plaka</th>
                            <th>Son Sinyal</th>
                            <th>Durum</th>
                        </tr>
                    </thead>
                    <tbody id="staff-body">
                        </tbody>
                </table>
            </div>
        </div>

        <div id="roam" class="view">
            <div class="map-placeholder" id="world-map">
                <div style="font-size:3rem; opacity:0.1; font-weight:900;">GLOBAL ROAMING STATUS</div>
                </div>
            <div style="flex:1; background:var(--bg-card); border:1px solid var(--border); border-radius:8px; overflow:hidden;">
                <table class="roam-table">
                    <thead>
                        <tr>
                            <th>√úlke</th>
                            <th>Partner Operat√∂r</th>
                            <th>Baƒülantƒ± Tipi</th>
                            <th>Gecikme (ms)</th>
                            <th>Durum</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>üá∫üá∏ ABD</td><td>T-Mobile / AT&T</td><td>5G / LTE</td><td>140ms</td><td><span class="status-badge" style="background:var(--accent-green); color:white;">ONLINE</span></td></tr>
                        <tr><td>üá©üá™ Almanya</td><td>Telekom.de</td><td>5G</td><td>45ms</td><td><span class="status-badge" style="background:var(--accent-green); color:white;">ONLINE</span></td></tr>
                        <tr><td>üá¨üáß ƒ∞ngiltere</td><td>Vodafone UK</td><td>LTE+</td><td>52ms</td><td><span class="status-badge" style="background:var(--accent-green); color:white;">ONLINE</span></td></tr>
                        <tr><td>üá´üá∑ Fransa</td><td>Orange F</td><td>LTE</td><td>48ms</td><td><span class="status-badge" style="background:var(--accent-green); color:white;">ONLINE</span></td></tr>
                        <tr><td>üá∑üá∫ Rusya</td><td>MTS</td><td>3G/LTE</td><td>88ms</td><td><span class="status-badge" style="background:#d29922; color:black;">Yava≈ü</span></td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="sorgu" class="view">
            <div class="search-container">
                <h2 style="text-align:center; color:var(--tc-yellow); margin-bottom:20px;">ABONE ƒ∞STƒ∞HBARAT SERVƒ∞Sƒ∞ (LEVEL 5)</h2>
                <input type="text" id="gsmInput" class="search-inp" placeholder="Numara Giriniz (√ñrn: 535 465 33 84)">
                <button class="btn-blue" style="width:100%; padding:15px; font-size:1.1rem; border:none; border-radius:8px; cursor:pointer; color:white; background:var(--tc-blue);" onclick="performSearch()">SORGULA</button>
                
                <div id="loader" style="display:none; text-align:center; padding:40px;">
                    <i class="fas fa-radar fa-spin" style="font-size:2.5rem; color:var(--accent-red);"></i>
                    <p style="margin-top:10px;">Emniyet ve N√ºfus Veritabanƒ± Taranƒ±yor...</p>
                </div>

                <div id="result-card" class="result-card" style="margin-top:20px;">
                    </div>
            </div>
        </div>

        <div id="history" class="view">
             <div style="flex:1; background:var(--bg-card); border:1px solid var(--border); border-radius:8px; overflow:hidden;">
                <div style="padding:15px; font-weight:bold; border-bottom:1px solid var(--border);">ƒ∞≈ülem Ge√ßmi≈üi (Routing Logs)</div>
                <table class="staff-table">
                    <thead><tr><th>ID</th><th>Birim</th><th>Sorun</th><th>A√ßƒ±klama</th><th>Zaman</th><th>Durum</th></tr></thead>
                    <tbody id="hist-body"></tbody>
                </table>
             </div>
        </div>

        <div id="server" class="view">
            <div style="display:grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap:20px;" id="server-grid"></div>
        </div>
        <div id="chat" class="view">
            <div style="flex:1; background:var(--bg-card); border:1px solid var(--border); border-radius:8px; display:flex; flex-direction:column;">
                <div style="padding:15px; border-bottom:1px solid var(--border);">Saha Destek Chat</div>
                <div id="chat-area" style="flex:1; padding:20px; overflow-y:auto; display:flex; flex-direction:column; gap:10px;"></div>
                <div style="padding:15px; border-top:1px solid var(--border); display:flex; gap:10px;">
                    <input type="text" id="chat-inp" style="flex:1; padding:10px; background:#0b0e11; border:1px solid var(--border); color:white;" placeholder="Mesaj...">
                    <button onclick="sendChat()" style="padding:10px 20px; background:var(--tc-blue); border:none; color:white;">G√∂nder</button>
                </div>
            </div>
        </div>

    </main>

    <div class="modal-wrap" id="modal">
        <div class="modal-box">
            <h3 style="color:var(--tc-yellow);">Talebi Y√∂nlendir</h3>
            <p style="color:#888; margin-bottom:15px;" id="m-text"></p>
            <label style="color:#888; font-size:0.8rem;">HEDEF Bƒ∞Rƒ∞M</label>
            <select id="m-dept" style="width:100%; padding:10px; background:#0b0e11; border:1px solid var(--border); color:white; margin-bottom:15px;">
                <option>Saha Operasyonlarƒ±</option>
                <option>Core Network (Tier 2)</option>
                <option>Hukuk Departmanƒ±</option>
                <option>M√º≈üteri ƒ∞li≈ükileri</option>
            </select>
            <label style="color:#888; font-size:0.8rem;">TEKNƒ∞K NOT</label>
            <textarea style="width:100%; height:80px; padding:10px; background:#0b0e11; border:1px solid var(--border); color:white; margin-bottom:15px;"></textarea>
            <div style="text-align:right;">
                <button onclick="closeModal()" style="padding:10px 20px; background:transparent; border:1px solid #555; color:white;">ƒ∞ptal</button>
                <button onclick="confirmRoute()" style="padding:10px 20px; background:var(--accent-green); border:none; color:white;">Onayla</button>
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        let selectedId = null;
        let tickets = [];
        let history = [];
        let idCounter = 15400;

        // DYNAMIC ISSUES & DESCRIPTIONS (NO REPETITION)
        const issueDB = [
            { t:"Sinyal Yok (T√ºnel)", d:"M√º≈üteri Avrasya T√ºneli giri≈üinde ≈üebekenin tamamen koptuƒüunu ve √ßƒ±kana kadar gelmediƒüini belirtiyor.", cat:"GSM", icon:"fa-signal" },
            { t:"Fatura A≈üƒ±mƒ±", d:"Paketim bitmediƒüi halde faturama 450 TL ek √ºcret yansƒ±tƒ±lmƒ±≈ü. ƒ∞tiraz ediyorum.", cat:"BILL", icon:"fa-file-invoice-dollar" },
            { t:"TV+ Donuyor", d:"Canlƒ± ma√ß yayƒ±nƒ± sƒ±rasƒ±nda g√∂r√ºnt√º s√ºrekli geriye sarƒ±yor ve pikselle≈üiyor. ƒ∞nternet hƒ±zƒ±m normal.", cat:"TV", icon:"fa-tv" },
            { t:"Fiber LOS I≈üƒ±ƒüƒ±", d:"Modemdeki LOS ƒ±≈üƒ±ƒüƒ± kƒ±rmƒ±zƒ± yanƒ±p s√∂n√ºyor. Kabloyu kontrol ettim, kopukluk yok.", cat:"SOL", icon:"fa-wifi" },
            { t:"BiP Mesaj Gitmiyor", d:"BiP √ºzerinden fotoƒüraf g√∂nderemiyorum, s√ºrekli 'Y√ºkleniyor' hatasƒ± alƒ±yorum.", cat:"APP", icon:"fa-comment-dots" },
            { t:"Yurt Dƒ±≈üƒ± Arama", d:"Almanya'daki oƒülumu arayamƒ±yorum, hat d√º≈ü√ºyor. Roaming servisim a√ßƒ±k.", cat:"GSM", icon:"fa-globe" },
            { t:"Sim Kart Bloke", d:"Telefonu yeniden ba≈ülattƒ±m, PUK kodu istedi. Yanlƒ±≈ü girdim kart kilitlendi.", cat:"GSM", icon:"fa-sim-card" },
            { t:"Kurumsal VPN", d:"≈ûirket merkezinden ≈üubeye VPN t√ºneli kurulamƒ±yor. IPsec hatasƒ± alƒ±yoruz.", cat:"CORP", icon:"fa-building" },
            { t:"Paycell Hata", d:"Kredi kartƒ±mdan para √ßekildi ama Paycell bakiyeme y√ºklenmedi.", cat:"FIN", icon:"fa-wallet" }
        ];

        const locs = ["ƒ∞stanbul/≈ûi≈üli", "ƒ∞zmir/Alsancak", "Ankara/√áankaya", "Antalya/Lara", "Bursa/Nil√ºfer", "Trabzon/Merkez", "ƒ∞stanbul/Kartal"];

        // --- INIT ---
        window.onload = function() {
            setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString(), 1000);
            renderStaff();
            renderMap();
            renderServer();
            // Start Flow
            addTicket(); addTicket(); addTicket();
            setInterval(addTicket, 4500);
        };

        // --- NAVIGATION ---
        function setView(id, el) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            if(el) el.classList.add('active');
            
            const titles = {'dash':'Canlƒ± Arƒ±za Takip', 'sorgu':'Yasaklƒ± B√∂lge', 'staff':'Personel & Vardiya', 'roam':'K√ºresel Roaming', 'history':'Aktarƒ±lan ƒ∞≈üler', 'server':'Sunucu Odasƒ±', 'chat':'Chat'};
            document.getElementById('view-title').innerText = titles[id] || 'Panel';
        }

        // --- TICKET SYSTEM ---
        function addTicket() {
            idCounter++;
            const tmpl = issueDB[Math.floor(Math.random() * issueDB.length)];
            const loc = locs[Math.floor(Math.random() * locs.length)];
            
            const t = {
                id: idCounter,
                title: tmpl.t,
                desc: tmpl.d,
                cat: tmpl.cat,
                icon: tmpl.icon,
                loc: loc,
                time: new Date().toLocaleTimeString(),
                ip: `10.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.X`,
                name: "Abone-" + Math.floor(Math.random()*9999)
            };
            tickets.unshift(t);
            if(tickets.length > 50) tickets.pop();
            renderTickets();
            document.getElementById('stat-pend').innerText = tickets.length;
        }

        function renderTickets() {
            const list = document.getElementById('ticket-list');
            list.innerHTML = "";
            tickets.forEach(t => {
                const div = document.createElement('div');
                div.className = `ticket-item ${selectedId === t.id ? 'active' : ''}`;
                div.onclick = () => showDetail(t);
                div.innerHTML = `
                    <div class="t-icon" style="background:${t.cat=='GSM'?'rgba(0,79,159,0.2)':'rgba(255,201,0,0.2)'}; color:${t.cat=='GSM'?'#4dabf7':'#ffc900'}"><i class="fas ${t.icon}"></i></div>
                    <div style="font-family:'Consolas'; font-weight:bold;">#${t.id}</div>
                    <div>
                        <div style="font-weight:600; color:#fff;">${t.title}</div>
                        <div style="font-size:0.8rem; color:#888;">${t.loc}</div>
                    </div>
                    <div style="text-align:right; font-size:0.75rem; color:#888;">${t.time}</div>
                `;
                list.appendChild(div);
            });
        }

        function showDetail(t) {
            selectedId = t.id;
            renderTickets();
            const area = document.getElementById('detail-area');
            area.innerHTML = `
                <div style="padding:20px; border-bottom:1px solid var(--border);">
                    <h2 style="color:var(--tc-yellow);">#TRK-${t.id}</h2>
                    <h4 style="margin-top:5px;">${t.title}</h4>
                </div>
                <div class="tab-header">
                    <div class="tab-btn active" onclick="switchTab(event, 'tb-info')">Genel</div>
                    <div class="tab-btn" onclick="switchTab(event, 'tb-tech')">Teknik</div>
                </div>
                <div id="tb-info" class="tab-content show">
                    <div style="padding:15px; background:rgba(255,201,0,0.1); border-left:4px solid var(--tc-yellow); margin-bottom:20px; font-style:italic; color:#e0e0e0;">
                        "${t.desc}"
                    </div>
                    <div class="info-grid">
                        <div class="info-box"><span class="lbl">Lokasyon</span><span class="val">${t.loc}</span></div>
                        <div class="info-box"><span class="lbl">Abone</span><span class="val">${t.name}</span></div>
                        <div class="info-box"><span class="lbl">Hizmet</span><span class="val">${t.cat} Service</span></div>
                        <div class="info-box"><span class="lbl">√ñncelik</span><span class="val" style="color:${Math.random()>0.5?'var(--accent-red)':'var(--accent-green)'}">Normal</span></div>
                    </div>
                </div>
                <div id="tb-tech" class="tab-content">
                    <div class="info-grid" style="margin-bottom:15px;">
                        <div class="info-box"><span class="lbl">IP</span><span class="val">${t.ip}</span></div>
                        <div class="info-box"><span class="lbl">Signal</span><span class="val">-${Math.floor(Math.random()*50)+60} dBm</span></div>
                    </div>
                    <div class="console">
> Diagnostics initiated...
> Pinging Gateway... OK (12ms)
> Checking Subscriber Profile... Active
> Error Log: CONNECTION_RESET_BY_PEER
> Hop 3 latency is high.
                    </div>
                </div>
                <div style="padding:20px; border-top:1px solid var(--border); display:flex; gap:10px; margin-top:auto;">
                    <button onclick="openModal()" style="flex:1; padding:12px; background:var(--tc-blue); border:none; border-radius:4px; color:white; font-weight:bold;">Y√∂nlendir</button>
                    <button onclick="resolve()" style="flex:1; padding:12px; background:var(--accent-green); border:none; border-radius:4px; color:white; font-weight:bold;">√á√∂z√ºld√º</button>
                </div>
            `;
        }

        function switchTab(e, id) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('show'));
            document.getElementById(id).classList.add('show');
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');
        }

        // --- ABONE SORGU (CUSTOM LOGIC) ---
        function performSearch() {
            const inp = document.getElementById('gsmInput').value.replace(/\s/g, '');
            document.getElementById('result-card').style.display = 'none';
            document.getElementById('loader').style.display = 'block';

            setTimeout(() => {
                document.getElementById('loader').style.display = 'none';
                document.getElementById('result-card').style.display = 'block';
                
                let data = {};
                
                if(inp === '5354653384') {
                    // *** SPECIFIC TARGET ***
                    data = {
                        name: "MEHMET DUGAN",
                        tc: "254********",
                        dob: "01/04/1964",
                        dev: "Redmi 14C",
                        loc: "ƒ∞stanbul Kartal Soƒüanlƒ±k Yeni Mh. Eraykent Cd.",
                        debt: "0.00 TL",
                        score: "1850 (M√ºkemmel)",
                        flag: true
                    };
                } else {
                    // *** RANDOM ***
                    data = {
                        name: "Bilinmeyen Abone",
                        tc: Math.floor(Math.random()*99999999999),
                        dob: "12/05/1985",
                        dev: "iPhone 13",
                        loc: "ƒ∞stanbul / ≈ûi≈üli / Merkez",
                        debt: (Math.random()*1000).toFixed(2) + " TL",
                        score: "1200 (Orta)",
                        flag: false
                    };
                }

                document.getElementById('result-card').innerHTML = `
                    ${data.flag ? '<div class="target-found">HEDEF TESPƒ∞T EDƒ∞LDƒ∞</div>' : ''}
                    <div style="display:flex; gap:20px; align-items:center; margin-bottom:20px;">
                        <div style="width:70px; height:70px; background:#333; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:2rem; border:2px solid ${data.flag?'var(--accent-red)':'var(--border)'}"><i class="fas fa-user"></i></div>
                        <div>
                            <h2 style="color:white;">${data.name}</h2>
                            <div style="color:var(--tc-yellow); font-family:'Consolas'; font-size:1.2rem;">${inp}</div>
                        </div>
                    </div>
                    <div class="info-grid">
                        <div class="info-box"><span class="lbl">Doƒüum Tarihi</span><span class="val">${data.dob}</span></div>
                        <div class="info-box"><span class="lbl">Cihaz</span><span class="val">${data.dev}</span></div>
                        <div class="info-box" style="grid-column:span 2; border-color:${data.flag?'var(--accent-green)':'var(--border)'}"><span class="lbl">Anlƒ±k Konum</span><span class="val" style="color:${data.flag?'var(--accent-green)':'white'}">${data.loc}</span></div>
                        <div class="info-box"><span class="lbl">Bor√ß</span><span class="val">${data.debt}</span></div>
                        <div class="info-box"><span class="lbl">Kredi Puanƒ±</span><span class="val">${data.score}</span></div>
                    </div>
                `;
            }, 1200);
        }

        // --- NEW: STAFF & ROAMING RENDERS ---
        function renderStaff() {
            const body = document.getElementById('staff-body');
            const staff = [
                {id:101, n:"Ahmet Yƒ±lmaz", r:"≈ûi≈üli", p:"34 TRK 99", s:"Aktif", c:"var(--accent-green)"},
                {id:102, n:"Mehmet Demir", r:"Kartal", p:"34 TCELL 01", s:"Yolda", c:"var(--tc-yellow)"},
                {id:103, n:"Ay≈üe Kaya", r:"Kadƒ±k√∂y", p:"34 GLB 55", s:"Mola", c:"#888"},
                {id:104, n:"Caner Erkin", r:"Be≈üikta≈ü", p:"34 TRK 22", s:"Aktif", c:"var(--accent-green)"}
            ];
            staff.forEach(s => {
                body.innerHTML += `<tr><td>${s.id}</td><td>${s.n}</td><td>${s.r}</td><td>${s.p}</td><td>Az √ñnce</td><td><span class="status-badge" style="background:${s.c}; color:white;">${s.s}</span></td></tr>`;
            });
        }

        function renderMap() {
            const map = document.getElementById('world-map');
            for(let i=0; i<10; i++) {
                map.innerHTML += `<div class="map-dot" style="left:${Math.random()*90}%; top:${Math.random()*80}%; background:${Math.random()>0.8?'orange':'#238636'}"></div>`;
            }
        }

        function renderServer() {
            const grid = document.getElementById('server-grid');
            for(let i=1; i<=8; i++) {
                grid.innerHTML += `<div style="background:var(--bg-card); padding:20px; border-radius:8px; border:1px solid var(--border);">
                    <div style="font-weight:bold; color:white; margin-bottom:10px;">NODE-${i}</div>
                    <div style="height:5px; background:#333; border-radius:3px;"><div style="width:${Math.random()*100}%; background:var(--tc-blue); height:100%;"></div></div>
                    <div style="font-size:0.8rem; color:#888; margin-top:5px;">Load: OK</div>
                </div>`;
            }
        }

        // --- MODAL & LOGIC ---
        function openModal() {
            if(!selectedId) return;
            document.getElementById('m-text').innerText = "ID: #TRK-" + selectedId;
            document.getElementById('modal').style.display = 'flex';
        }
        function closeModal() { document.getElementById('modal').style.display = 'none'; }
        
        function confirmRoute() {
            const ticket = tickets.find(t => t.id === selectedId);
            const dept = document.getElementById('m-dept').value;
            
            const tbody = document.getElementById('hist-body');
            tbody.innerHTML = `<tr><td>#${ticket.id}</td><td>${dept}</td><td>${ticket.title}</td><td>Y√∂nlendirildi</td><td>${new Date().toLocaleTimeString()}</td><td><span class="status-badge" style="background:#d29922; color:black;">Bekliyor</span></td></tr>` + tbody.innerHTML;
            
            tickets = tickets.filter(t => t.id !== selectedId);
            selectedId = null;
            renderTickets();
            document.getElementById('detail-area').innerHTML = `<div style="height:100%; display:flex; justify-content:center; align-items:center; color:var(--accent-green); flex-direction:column;"><i class="fas fa-check-circle" style="font-size:3rem;"></i><p>Ba≈üarƒ±yla Aktarƒ±ldƒ±</p></div>`;
            closeModal();
        }
        
        function resolve() {
            if(!selectedId) return;
            alert('Talep √á√∂z√ºld√º olarak kapatƒ±ldƒ±.');
            tickets = tickets.filter(t => t.id !== selectedId);
            selectedId = null;
            renderTickets();
            document.getElementById('detail-area').innerHTML = "";
        }

        // --- CHAT ---
        function sendChat() {
            const inp = document.getElementById('chat-inp');
            const area = document.getElementById('chat-area');
            if(!inp.value) return;
            area.innerHTML += `<div style="align-self:flex-end; background:var(--tc-blue); padding:10px; border-radius:6px; color:white;">${inp.value}</div>`;
            inp.value = "";
            setTimeout(() => {
                area.innerHTML += `<div style="align-self:flex-start; background:#2b313a; padding:10px; border-radius:6px;">Anla≈üƒ±ldƒ± Merkez.</div>`;
            }, 1000);
        }

    </script>
</body>
</html>
