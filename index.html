<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#0f3460" />
  <title>Carrefour Gift Card Promotion</title>
  <style>
    :root{
      --bg1:#1a1a2e; --bg2:#16213e; --bg3:#0f3460;
      --glass:rgba(255,255,255,.06); --glass2:rgba(255,255,255,.08);
      --border:rgba(255,255,255,.12);
      --accent:#e74c3c; --accent2:#c0392b;
      --success:#2ecc71; --success2:#27ae60;
      --warn:#f39c12; --text:#ecf0f1;
      --radius:20px; --shadow:0 20px 40px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Helvetica,Arial,sans-serif;
      background:linear-gradient(135deg,var(--bg1),var(--bg2),var(--bg3));
      color:#fff;
      padding:16px;
      display:grid;
      place-items:start center;
    }
    .container{
      width:min(960px,100%);
      margin-inline:auto;
      background:var(--glass);
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
      border:1px solid var(--border);
      border-radius:var(--radius);
      padding:clamp(18px,3vw,32px);
      box-shadow:var(--shadow);
    }

    /* language toggle */
    .language-toggle{
      display:flex; justify-content:center; gap:12px; margin-bottom:20px; flex-wrap:wrap
    }
    .lang-btn{
      appearance:none; border:0; cursor:pointer; padding:10px 18px;
      border-radius:999px; font-weight:700; letter-spacing:.2px;
      background:linear-gradient(45deg,var(--accent),var(--accent2));
      color:#fff; transition:transform .2s ease, box-shadow .2s ease, opacity .2s ease;
      touch-action:manipulation
    }
    .lang-btn:hover{transform:translateY(-2px); box-shadow:0 10px 20px rgba(0,0,0,.35)}
    .lang-btn.active{background:linear-gradient(45deg,var(--success2),var(--success)); transform:scale(1.03)}
    .header{text-align:center; margin-bottom:28px}
    .title{
      font-size:clamp(28px,4.5vw,40px); font-weight:800;
      background:linear-gradient(45deg,#f39c12,#e67e22);
      -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
      margin:0 0 8px
    }
    .subtitle{font-size:clamp(15px,2.5vw,18px); color:var(--text); margin:0 0 10px}
    .gift-amount{
      font-size:clamp(36px,6vw,54px); font-weight:900; color:var(--accent);
      text-shadow:0 0 20px rgba(231,76,60,.45)
    }

    /* logos */
    .logos-section{
      display:grid; gap:16px; margin:24px 0;
      grid-template-columns:repeat( auto-fit, minmax(110px,1fr) );
      align-items:center
    }
    .logo{
      height:54px; max-width:100%; object-fit:contain; display:block; margin-inline:auto;
      filter:brightness(1.08); transition:transform .2s ease; will-change:transform;
    }
    .logo:hover{transform:scale(1.04)}
    .logo[loading="lazy"]{content-visibility:auto}

    /* features */
    .features{
      display:grid; gap:16px; margin:22px 0;
      grid-template-columns:repeat( auto-fit, minmax(220px,1fr) );
    }
    .feature{
      background:var(--glass2); border:1px solid var(--border);
      padding:18px; border-radius:16px; text-align:center
    }
    .feature-icon{font-size:28px; margin-bottom:6px}

    /* countdown */
    .countdown-section{
      text-align:center; margin:26px 0; padding:22px;
      background:rgba(0,0,0,.28); border-radius:16px; border:2px solid rgba(231,76,60,.28)
    }
    .countdown-title{font-size:clamp(16px,2.4vw,20px); margin-bottom:14px; color:var(--warn); font-weight:700}
    .countdown{
      display:flex; justify-content:center; gap:12px; flex-wrap:wrap
    }
    .countdown-item{
      background:linear-gradient(45deg,var(--accent),var(--accent2));
      border-radius:14px; padding:16px 18px; min-width:86px;
      box-shadow:0 10px 28px rgba(231,76,60,.3)
    }
    .countdown-number{display:block; font-size:clamp(26px,5vw,36px); font-weight:800; line-height:1}
    .countdown-label{font-size:12px; opacity:.9; margin-top:4px; letter-spacing:.3px}

    /* form */
    .form-section{
      margin-top:20px; padding:20px;
      background:rgba(0,0,0,.22); border-radius:16px; border:1px solid var(--border)
    }
    .form-section h2{margin:0 0 14px; font-size:clamp(18px,2.6vw,22px)}
    .form-group{margin-bottom:14px}
    .form-group label{display:block; margin-bottom:8px; font-weight:700; color:var(--text)}
    .form-group input{
      width:100%; padding:14px 14px; border-radius:12px; border:2px solid transparent;
      background:rgba(255,255,255,.1); color:#fff; font-size:16px; outline:none;
      transition:border-color .2s ease, background .2s ease
    }
    .form-group input:focus{border-color:var(--accent); background:rgba(255,255,255,.16)}
    .form-group input::placeholder{color:rgba(255,255,255,.6)}
    .checkbox-group{display:flex; align-items:flex-start; gap:10px; margin-top:8px}
    .checkbox-group input[type="checkbox"]{margin-top:3px}
    .submit-btn{
      width:100%; padding:16px; margin-top:14px; border:0; cursor:pointer;
      border-radius:12px; font-size:17px; font-weight:800; letter-spacing:.2px;
      background:linear-gradient(45deg,var(--success2),var(--success)); color:#fff;
      transition:transform .2s ease, box-shadow .2s ease, opacity .2s ease
    }
    .submit-btn:hover{transform:translateY(-2px); box-shadow:0 15px 28px rgba(39,174,96,.4)}
    .submit-btn:disabled{background:#7f8c8d; cursor:not-allowed; transform:none; box-shadow:none; opacity:.85}

    .status-message{
      text-align:center; padding:14px; border-radius:10px; margin-top:14px; display:none
    }
    .success{background:rgba(39,174,96,.2); border:1px solid var(--success2); color:var(--success)}
    .error{background:rgba(231,76,60,.2); border:1px solid var(--accent); color:var(--accent)}
    .closed{background:rgba(149,165,166,.18); border:1px solid #95a5a6; color:#bdc3c7}

    /* small phones tweaks */
    @media (max-width:480px){
      body{padding:10px}
      .container{padding:16px}
      .logo{height:44px}
      .countdown-item{min-width:78px; padding:14px 12px}
    }

    /* reduce motion */
    @media (prefers-reduced-motion: reduce){
      .lang-btn,.logo{transition:none}
    }
  </style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="title">
    <div class="language-toggle" role="tablist" aria-label="Language switch">
      <button class="lang-btn active" onclick="setLanguage('en', this)" aria-selected="true">English</button>
      <button class="lang-btn" onclick="setLanguage('tr', this)" aria-selected="false">TÃ¼rkÃ§e</button>
    </div>

    <div class="header">
      <h1 class="title" id="title">Carrefour Gift Card</h1>
      <p class="subtitle" id="subtitle">Valid on Coca Cola and NestlÃ© products â€¢ Form opens at 01:00 CET</p>
      <div class="gift-amount" id="gift-amount">â‚¬15</div>
    </div>

    <div class="logos-section" aria-label="Partner logos">
      <img loading="lazy" src="https://kyrosil.eu/wp-content/uploads/2025/04/adsiz-tasarim.png" alt="Kyrosil" class="logo">
      <img loading="lazy" src="https://kyrosil.eu/wp-content/uploads/2025/04/image-17.png" alt="Carrefour" class="logo">
      <img loading="lazy" src="https://kyrosil.eu/wp-content/uploads/2025/04/image-16.png" alt="CarrefourSA" class="logo">
      <img loading="lazy" src="https://kyrosil.eu/wp-content/uploads/2025/04/image-3.png" alt="NestlÃ©" class="logo">
      <img loading="lazy" src="https://kyrosil.eu/wp-content/uploads/2025/04/image-5.png" alt="Coca Cola" class="logo">
    </div>

    <div class="features">
      <div class="feature">
        <div class="feature-icon" aria-hidden="true">ðŸŽ¯</div>
        <h3 id="feature1-title">No Minimum Limit</h3>
        <p id="feature1-desc">Use your gift card without any minimum purchase requirement</p>
      </div>
      <div class="feature">
        <div class="feature-icon" aria-hidden="true">âš¡</div>
        <h3 id="feature2-title">Instant Activation</h3>
        <p id="feature2-desc">Your gift card will be activated instantly through KyrosilRewards Bot</p>
      </div>
      <div class="feature">
        <div class="feature-icon" aria-hidden="true">ðŸ‘¥</div>
        <h3 id="feature3-title">No Participant Limit</h3>
        <p id="feature3-desc">Everyone can participate in this amazing offer</p>
      </div>
    </div>

    <div class="countdown-section" aria-live="polite">
      <h2 class="countdown-title" id="countdown-title">Form Opens In:</h2>
      <div class="countdown" id="countdown">
        <div class="countdown-item">
          <span class="countdown-number" id="hours">00</span>
          <span class="countdown-label" id="hours-label">Hours</span>
        </div>
        <div class="countdown-item">
          <span class="countdown-number" id="minutes">00</span>
          <span class="countdown-label" id="minutes-label">Minutes</span>
        </div>
        <div class="countdown-item">
          <span class="countdown-number" id="seconds">00</span>
          <span class="countdown-label" id="seconds-label">Seconds</span>
        </div>
      </div>
    </div>

    <div class="form-section" id="form-section">
      <h2 id="form-title">Registration Form</h2>
      <form id="registration-form" novalidate>
        <div class="form-group">
          <label for="fullName" id="fullname-label">Full Name:</label>
          <input type="text" id="fullName" name="fullName" autocomplete="name" required placeholder="Jane Doe" />
        </div>

        <div class="form-group">
          <label for="username" id="username-label">EU Portal or Instagram Username:</label>
          <input type="text" id="username" name="username" required placeholder="@yourhandle" />
        </div>

        <div class="form-group">
          <label for="cardNumber" id="card-label">Carrefour Card Number or Registered GSM:</label>
          <input type="text" id="cardNumber" name="cardNumber" inputmode="numeric" required placeholder="XXXX XXXX / 5XXXXXXXXX" />
        </div>

        <div class="checkbox-group">
          <input type="checkbox" id="gdprConsent" name="gdprConsent" required />
          <label for="gdprConsent" id="gdpr-label">I agree to the GDPR terms and conditions for data processing.</label>
        </div>

        <button type="submit" class="submit-btn" id="submit-btn" disabled>Register Now</button>
      </form>

      <div class="status-message" id="status-message" role="status" aria-live="polite"></div>
    </div>
  </div>

  <script>
    // Translations (EN/TR) â€” includes CET timing notes
    const translations = {
      en: {
        title: "Carrefour Gift Card",
        subtitle: "Valid on Coca Cola and NestlÃ© products â€¢ Form opens at 01:00 CET",
        giftAmount: "â‚¬15",
        feature1Title: "No Minimum Limit",
        feature1Desc: "Use your gift card without any minimum purchase requirement",
        feature2Title: "Instant Activation",
        feature2Desc: "Your gift card will be activated instantly through KyrosilRewards Bot",
        feature3Title: "No Participant Limit",
        feature3Desc: "Everyone can participate in this amazing offer",
        countdownTitle: "Form Opens In:",
        formTitle: "Registration Form",
        fullnameLabel: "Full Name:",
        usernameLabel: "EU Portal or Instagram Username:",
        cardLabel: "Carrefour Card Number or Registered GSM:",
        gdprLabel: "I agree to the GDPR terms and conditions for data processing.",
        submitBtn: "Register Now",
        hoursLabel: "Hours",
        minutesLabel: "Minutes",
        secondsLabel: "Seconds",
        formClosed: "Registration period has ended.",
        formClosedBadge: "Registration Closed",
        formOpen: "Form is Open!",
        formLiveBadge: "Registration is Live!",
        formNotOpen: "Registration form will open at 01:00 CET",
        successMessage: "Registration successful! You will receive an SMS confirmation shortly.",
        smsMessage: "Your Carrefour gift card has been registered successfully. You will receive activation details soon."
      },
      tr: {
        title: "CarrefourSA Hediye KartÄ±",
        subtitle: "Coca Cola ve NestlÃ© Ã¼rÃ¼nlerinde geÃ§erli â€¢ Form 01:00 CETâ€™te aÃ§Ä±lÄ±r",
        giftAmount: "300â‚º",
        feature1Title: "Alt Limit Yok",
        feature1Desc: "Hediye kartÄ±nÄ±zÄ± minimum alÄ±ÅŸveriÅŸ olmadan kullanabilirsiniz",
        feature2Title: "AnÄ±nda Aktivasyon",
        feature2Desc: "Hediye kartÄ±nÄ±z KyrosilRewards Bot aracÄ±lÄ±ÄŸÄ±yla anÄ±nda aktive edilecek",
        feature3Title: "KiÅŸi SÄ±nÄ±rÄ± Yok",
        feature3Desc: "Bu fÄ±rsata herkes katÄ±labilir",
        countdownTitle: "Form AÃ§Ä±lÄ±ÅŸÄ±na:",
        formTitle: "KayÄ±t Formu",
        fullnameLabel: "Ad Soyad:",
        usernameLabel: "EU Portal veya Instagram KullanÄ±cÄ± AdÄ±:",
        cardLabel: "Carrefour Kart NumarasÄ± veya KayÄ±tlÄ± GSM:",
        gdprLabel: "KiÅŸisel verilerimin iÅŸlenmesine dair KVKK ÅŸartlarÄ±nÄ± kabul ediyorum.",
        submitBtn: "Åžimdi KayÄ±t Ol",
        hoursLabel: "Saat",
        minutesLabel: "Dakika",
        secondsLabel: "Saniye",
        formClosed: "KayÄ±t sÃ¼resi sona erdi.",
        formClosedBadge: "KayÄ±t KapalÄ±",
        formOpen: "Form AÃ§Ä±k!",
        formLiveBadge: "KayÄ±t BaÅŸladÄ±!",
        formNotOpen: "KayÄ±t formu 01:00 CETâ€™te aÃ§Ä±lacak",
        successMessage: "KayÄ±t baÅŸarÄ±lÄ±! KÄ±sa sÃ¼re iÃ§inde SMS onayÄ± alacaksÄ±nÄ±z.",
        smsMessage: "CarrefourSA hediye kartÄ±nÄ±z baÅŸarÄ±yla kaydedildi. Aktivasyon detaylarÄ±nÄ± yakÄ±nda alacaksÄ±nÄ±z."
      }
    };

    let currentLanguage = 'en';

    function setLanguage(lang, btnEl){
      currentLanguage = lang;

      // active state
      document.querySelectorAll('.lang-btn').forEach(b=>{
        b.classList.toggle('active', b===btnEl);
        b.setAttribute('aria-selected', b===btnEl ? 'true' : 'false');
      });

      const t = translations[lang];
      // text nodes
      document.getElementById('title').textContent = t.title;
      document.getElementById('subtitle').textContent = t.subtitle;
      document.getElementById('gift-amount').textContent = t.giftAmount;
      document.getElementById('feature1-title').textContent = t.feature1Title;
      document.getElementById('feature1-desc').textContent = t.feature1Desc;
      document.getElementById('feature2-title').textContent = t.feature2Title;
      document.getElementById('feature2-desc').textContent = t.feature2Desc;
      document.getElementById('feature3-title').textContent = t.feature3Title;
      document.getElementById('feature3-desc').textContent = t.feature3Desc;
      document.getElementById('countdown-title').textContent = t.countdownTitle;
      document.getElementById('form-title').textContent = t.formTitle;
      document.getElementById('fullname-label').textContent = t.fullnameLabel;
      document.getElementById('username-label').textContent = t.usernameLabel;
      document.getElementById('card-label').textContent = t.cardLabel;
      document.getElementById('gdpr-label').textContent = t.gdprLabel;
      document.getElementById('submit-btn').textContent = t.submitBtn;
      document.getElementById('hours-label').textContent = t.hoursLabel;
      document.getElementById('minutes-label').textContent = t.minutesLabel;
      document.getElementById('seconds-label').textContent = t.secondsLabel;

      // status/message re-render for current state
      renderCountdownState();
    }

    function getNowInCET(){
      // Always compute current CET/CEST time irrespective of client locale
      const now = new Date();
      return new Date(now.toLocaleString("en-US",{ timeZone:"Europe/Berlin" }));
    }

    function getTargetWindows(cetNow){
      // Target open window: 01:00â€“01:05 CET (today, else tomorrow)
      const openStart = new Date(cetNow);
      openStart.setHours(1,0,0,0);

      let targetStart = openStart > cetNow ? openStart : new Date(openStart.getTime()+86400000);
      const targetEnd = new Date(targetStart.getTime() + 5*60*1000); // +5 minutes

      return { targetStart, targetEnd };
    }

    function formatDiff(ms){
      const totalSeconds = Math.max(0, Math.floor(ms/1000));
      const h = Math.floor(totalSeconds/3600);
      const m = Math.floor((totalSeconds%3600)/60);
      const s = totalSeconds%60;
      return {h,m,s};
    }

    function renderCountdownState(){
      const t = translations[currentLanguage];
      const cetNow = getNowInCET();
      const { targetStart, targetEnd } = getTargetWindows(cetNow);

      const untilOpen = targetStart - cetNow;
      const untilClose = targetEnd - cetNow;

      const countdownEl = document.getElementById('countdown');
      const titleEl = document.getElementById('countdown-title');
      const submitBtn = document.getElementById('submit-btn');

      if (untilClose <= 0){
        // CLOSED
        titleEl.textContent = t.formClosed;
        countdownEl.innerHTML = `<div class="status-message closed">${t.formClosedBadge}</div>`;
        submitBtn.disabled = true;
        return;
      }

      if (untilOpen <= 0 && untilClose > 0){
        // OPEN (only inside the strict window)
        titleEl.textContent = t.formOpen;
        countdownEl.innerHTML = `<div class="status-message success">${t.formLiveBadge}</div>`;
        submitBtn.disabled = false;
        return;
      }

      // NOT OPEN YET
      titleEl.textContent = t.countdownTitle;
      const {h,m,s} = formatDiff(untilOpen);
      document.getElementById('hours').textContent = String(h).padStart(2,'0');
      document.getElementById('minutes').textContent = String(m).padStart(2,'0');
      document.getElementById('seconds').textContent = String(s).padStart(2,'0');
      submitBtn.disabled = true;
    }

    function updateCountdown(){
      renderCountdownState();
    }

    // Form submission handler (mock)
    document.getElementById('registration-form').addEventListener('submit', function(e){
      e.preventDefault();

      // Safety: prevent submit if not in open window
      const cetNow = getNowInCET();
      const { targetStart, targetEnd } = getTargetWindows(cetNow);
      if (!(cetNow >= targetStart && cetNow < targetEnd)){
        // Hard block if user tries to bypass disabled state
        const msg = translations[currentLanguage].formNotOpen;
        const status = document.getElementById('status-message');
        status.className = 'status-message error';
        status.textContent = msg;
        status.style.display = 'block';
        return;
      }

      const status = document.getElementById('status-message');
      status.className = 'status-message success';
      status.textContent = translations[currentLanguage].successMessage;
      status.style.display = 'block';

      setTimeout(()=>{ alert(translations[currentLanguage].smsMessage); }, 1200);
      this.reset();
      // Keep the button enabled only while window is open; next tick will handle state
    });

    // Boot
    renderCountdownState();
    const tick = setInterval(updateCountdown, 1000);

    // Initialize with English (activate button state)
    (function initLang(){
      const firstBtn = document.querySelector('.lang-btn');
      setLanguage('en', firstBtn);
    })();
  </script>
</body>
</html>
